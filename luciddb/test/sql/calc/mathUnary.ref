0: jdbc:luciddb:> -- unary math operations in calculator
0: jdbc:luciddb:> -- only one is unary negation
0: jdbc:luciddb:> 
0: jdbc:luciddb:> -- Test against our standard data set
0: jdbc:luciddb:> 
0: jdbc:luciddb:> set schema 's';
0: jdbc:luciddb:> 
0: jdbc:luciddb:> SELECT N1, N2, N3, N4, N5, '|', -N2, - (N3 + N4), - (N4 - N5)
. . . . . . . . > FROM TEST_INTEGER_TABLE ORDER BY N1,N2,N3,N4,N5
. . . . . . . . > ;
+--------------+----------+----------+----------+----------+---------+----------+----------+----------+
|      N1      |    N2    |    N3    |    N4    |    N5    | EXPR$5  |  EXPR$6  |  EXPR$7  |  EXPR$8  |
+--------------+----------+----------+----------+----------+---------+----------+----------+----------+
|              |          |          |          |          | |       |          |          |          |
| -2147483648  | -32768   | -128     | -7       | 0        | |       | 32768    | 135      | 7        |
| -123456      | -234567  | -345678  | -456789  | -567890  | |       | 234567   | 802467   | -111101  |
| -1000        | -2000    | -3000    | -4000    | -5000    | |       | 2000     | 7000     | -1000    |
| -100         | -200     | -300     | -400     | -500     | |       | 200      | 700      | -100     |
| -1           | -2       | -3       | -4       | -5       | |       | 2        | 7        | -1       |
| 0            | 0        | 0        | 0        | 0        | |       | 0        | 0        | 0        |
| 1            | 2        | 3        | 4        | 5        | |       | -2       | -7       | 1        |
| 100          | 200      | 300      | 400      | 500      | |       | -200     | -700     | 100      |
| 1000         | 2000     | 3000     | 4000     | 5000     | |       | -2000    | -7000    | 1000     |
| 123456       | 234567   | 345678   | 456789   | 567890   | |       | -234567  | -802467  | 111101   |
| 2147483647   | 32767    | 127      | 8        | 1        | |       | -32767   | -135     | -7       |
+--------------+----------+----------+----------+----------+---------+----------+----------+----------+
0: jdbc:luciddb:> 
0: jdbc:luciddb:> SELECT N1, N2, N3, N4, N5, '|', -N2, - (N3 + N4), - (N4 - N5)
. . . . . . . . > FROM TEST_NUMERIC_TABLE ORDER BY N1,N2,N3,N4,N5
. . . . . . . . > ;
+------------+----------------+-----------------+-------------+--------------------+---------+----------------+------------------+-------------------+
|     N1     |       N2       |       N3        |     N4      |         N5         | EXPR$5  |     EXPR$6     |      EXPR$7      |      EXPR$8       |
+------------+----------------+-----------------+-------------+--------------------+---------+----------------+------------------+-------------------+
|            |                |                 |             |                    | |       |                |                  |                   |
| -99999999  | -999999999999  | -9999999.99999  | -99999.999  | -99999.9999999999  | |       | 999999999999   | 10099999.99899   | -0.0009999999     |
| -1100      | -2200          | -3300.33000     | -4400.440   | -5500.5500000000   | |       | 2200           | 7700.77000       | -1100.1100000000  |
| -111       | -222           | -333.00000      | -444.000    | -555.0000000000    | |       | 222            | 777.00000        | -111.0000000000   |
| -1         | -2             | -3.00000        | -4.000      | -5.0000000000      | |       | 2              | 7.00000          | -1.0000000000     |
| 0          | 0              | 0.00000         | 0.000       | 0E-10              | |       | 0              | 0.00000          | 0E-10             |
| 1          | 2              | 3.00000         | 4.000       | 5.0000000000       | |       | -2             | -7.00000         | 1.0000000000      |
| 111        | 222            | 333.00000       | 444.000     | 555.0000000000     | |       | -222           | -777.00000       | 111.0000000000    |
| 1100       | 2200           | 3300.33000      | 4400.440    | 5500.5500000000    | |       | -2200          | -7700.77000      | 1100.1100000000   |
| 12345      | 23456          | 124.44300       | 98.887      | 948.4837322900     | |       | -23456         | -223.33000       | 849.5967322900    |
| 99999999   | 999999999999   | 9999999.99999   | 99999.999   | 99999.9999999999   | |       | -999999999999  | -10099999.99899  | 0.0009999999      |
+------------+----------------+-----------------+-------------+--------------------+---------+----------------+------------------+-------------------+
0: jdbc:luciddb:> 
0: jdbc:luciddb:> -- FRG-209
0: jdbc:luciddb:> SELECT N1, N2, N3, N4, N5, '|', -N2, - (N3 + N4), - (N4 - N5)
. . . . . . . . > FROM TEST_REAL_TABLE WHERE N1 <> 1.001 OR N1 IS NULL ORDER BY N1,N2,N3,N4,N5
. . . . . . . . > ;
+-------------+-------------+-------------+-----------------------+-----------------------+---------+-------------+--------------------------+-----------------+
|     N1      |     N2      |     N3      |          N4           |          N5           | EXPR$5  |   EXPR$6    |          EXPR$7          |     EXPR$8      |
+-------------+-------------+-------------+-----------------------+-----------------------+---------+-------------+--------------------------+-----------------+
|             |             |             |                       |                       | |       |             |                          |                 |
| -1.233E31   | -1.255E31   | -1.277E32   | -1.287632E206         | -3.3324443E307        | |       | 1.255E31    | 1.287632E206             | -3.3324443E307  |
| -1234567.0  | -1234567.0  | -1234567.0  | -1.23456789012345E14  | -1.23456789012345E14  | |       | 1234567.0   | 1.23456790246912E14      | -0.0            |
| -1.0        | -2.0        | -3.0        | -4.0                  | -5.0                  | |       | 2.0         | 7.0                      | -1.0            |
| -0.123456   | -0.123456   | -0.123456   | -0.12345678901234     | -0.12345678901234     | |       | 0.123456    | 0.24691279029407828      | -0.0            |
| -1.233E-29  | -1.255E-29  | -1.277E-30  | -1.287632E-198        | -3.3324443E-299       | |       | 1.255E-29   | 1.2769999807276572E-30   | 1.287632E-198   |
| 1.0E-37     | 1.0E38      | 1.0E38      | 1.0E-307              | 1.0E308               | |       | -1.0E38     | -9.999999680285692E37    | 1.0E308         |
| 1.233E-29   | 1.255E-29   | 1.277E-30   | 1.287632E-198         | 3.3324443E-299        | |       | -1.255E-29  | -1.2769999807276572E-30  | -1.287632E-198  |
| 0.123456    | 0.123456    | 0.123456    | 0.12345678901234      | 0.12345678901234      | |       | -0.123456   | -0.24691279029407828     | -0.0            |
| 1.0         | 2.0         | 3.0         | 4.0                   | 5.0                   | |       | -2.0        | -7.0                     | 1.0             |
| 1234567.0   | 1234567.0   | 1234567.0   | 1.23456789012345E14   | 1.23456789012345E14   | |       | -1234567.0  | -1.23456790246912E14     | -0.0            |
| 1.233E31    | 1.255E31    | 1.277E32    | 1.287632E206          | 3.3324443E307         | |       | -1.255E31   | -1.287632E206            | 3.3324443E307   |
+-------------+-------------+-------------+-----------------------+-----------------------+---------+-------------+--------------------------+-----------------+
0: jdbc:luciddb:> -- set numberFormat since floating point differs based on VM
0: jdbc:luciddb:> !set numberFormat 0.0000
0: jdbc:luciddb:> SELECT N1, N2, N3, N4, N5, '|', -N2, - (N3 + N4), - (N4 - N5)
. . . . . . . . > FROM TEST_REAL_TABLE WHERE N1 = CAST(1.001 as FLOAT);
+---------+---------+---------+---------+---------+---------+----------+----------+---------+
|   N1    |   N2    |   N3    |   N4    |   N5    | EXPR$5  |  EXPR$6  |  EXPR$7  | EXPR$8  |
+---------+---------+---------+---------+---------+---------+----------+----------+---------+
| 1.0010  | 2.0020  | 3.0030  | 4.0040  | 5.0050  | |       | -2.0020  | -7.0070  | 1.0010  |
+---------+---------+---------+---------+---------+---------+----------+----------+---------+
0: jdbc:luciddb:> !set numberFormat default
0: jdbc:luciddb:> 
0: jdbc:luciddb:> -- this should work, the result should get promoted to an I8
0: jdbc:luciddb:> -- but it does not (bug 15315)
0: jdbc:luciddb:> -- LDB-21
0: jdbc:luciddb:> SELECT - N1 FROM TEST_INTEGER_TABLE
. . . . . . . . > WHERE N1 = -2147483648
. . . . . . . . > ;
+--------------+
|    EXPR$0    |
+--------------+
| -2147483648  |
+--------------+
0: jdbc:luciddb:> 
0: jdbc:luciddb:> -- these are workarounds for the above
0: jdbc:luciddb:> -- LDB-21
0: jdbc:luciddb:> SELECT - CAST (N1 AS bigint), N1 * -1 FROM TEST_INTEGER_TABLE
. . . . . . . . > WHERE N1 = -2147483648
. . . . . . . . > ;
+-------------+--------------+
|   EXPR$0    |    EXPR$1    |
+-------------+--------------+
| 2147483648  | -2147483648  |
+-------------+--------------+
0: jdbc:luciddb:> 
0: jdbc:luciddb:> -- End test
0: jdbc:luciddb:> 
0: jdbc:luciddb:> !quit
