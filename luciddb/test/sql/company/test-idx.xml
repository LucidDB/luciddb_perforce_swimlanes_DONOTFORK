<project name="bh" default="company-idx-test">
  <target name="company-idx-test">
    <test-suite name="company-idx-test">

      <init-hook>
        <test-suite name="init">
          <test-suite-call testfile="${open.dir}/luciddb/test/sql/tinit.xml">
            <test-suite-modifier value="company-idx-test"/>
          </test-suite-call>
        </test-suite>
      </init-hook>

      <!-- Create schema (with indexes), load data, then run queries -->
      <!-- indexed has extra tests which non-indexed don't have -->
      <test name="index">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/index.sql"/>
      </test>

      <test name="download" requiresSuccess="index">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/download.sql"/>
      </test>

      <test name="junk" requiresSuccess="download">
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/LDB-92.sql"/>
      </test>


      <test name="joinEq" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinEq.sql"/>
      </test>

      <test name="joinRng" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinRng.sql"/>
      </test>

      <test name="joinMisc" requiresSuccess="download">
        <!-- substring and INC() functions not supported, commented out -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinMisc.sql"/>
      </test>

      <test name="joinSemi" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinSemi.sql"/>
      </test>

      <test name="joinSemiExp" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinSemiExp.sql"/>
      </test>

      <test name="agg" requiresSuccess="download">
        <!-- FRG-52 and FRG-115, queries commented out -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/agg.sql"/>
      </test>

      <test name="aggJoinEq" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggJoinEq.sql"/>
      </test>

      <test name="aggJoinRng" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggJoinRng.sql"/>
      </test>

      <test name="agg_cust" requiresSuccess="download">
        <!-- IN and to_number not supported yet -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/agg_cust.sql"/>
      </test>

      <test name="aggJoinEq_cust" requiresSuccess="download">
        <!-- LDB-92 -->
        <test-metadata>
          <withIndex value="true"/>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggJoinEq_cust.sql"/>
      </test>

      <test name="aggJoinRng_cust" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggJoinRng_cust.sql"/>
      </test>

      <test name="aggDistinct" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggDistinct.sql"/>
      </test>

      <test name="null" requiresSuccess="download">
        <!-- DESC commented out, not supported yet -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/null.sql"/>
      </test>

      <test name="order" requiresSuccess="download">
        <!-- ASC and DESC not supported yet -->
        <test-metadata>
          <withIndex value="true"/>

        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/order.sql"/>
      </test>

      <test name="scalarSubquery" requiresSuccess="download">
        <!-- ONEROW and lower not supported yet, FRG-114 -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/scalarSubquery.sql"/>
      </test>

      <test name="rangeNConv" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/rangeNConv.sql"/>
      </test>

      <test name="subFrom" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/subFrom.sql"/>
      </test>

      <test name="subExists" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/subExists.sql"/>
      </test>

      <test name="subIn" requiresSuccess="download">
        <!-- IN not supported yet -->
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/subIn.sql"/>
      </test>

      <test name="subMisc" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/subMisc.sql"/>
      </test>

      <test name="subMult" requiresSuccess="download">
        <!-- IN not supported yet -->
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/subMult.sql"/>
      </test>

      <!-- special tests just for indexes -->
      <test name="stats" requiresSuccess="download">
        <!-- histogram_bars doesn't exist, IN not supported -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/stats.sql"/>
      </test>

      <test name="aggJoinFilt" requiresSuccess="download">
        <!-- subqueries and in not supported -->
        <test-metadata>
          <withIndex value="true"/>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/aggJoinFilt.sql"/>
      </test>

      <test name="joinFiltExp" requiresSuccess="download">
        <!-- IN not supported yet, commented out queries -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinFiltExp.sql"/>
      </test>

      <test name="joinFilt" requiresSuccess="download">
        <!-- IN not supported yet, commented out queries -->
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/joinFilt.sql"/>
      </test>

      <test name="negJoinFiltExp" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/negJoinFiltExp.sql"/>
      </test>

      <test name="negJoinFilt" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/negJoinFilt.sql"/>
      </test>

      <test name="compIdx" requiresSuccess="download">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/company/gen/idx/compIdx.sql"/>
      </test>

      <cleanup-hook>
        <test-suite name="cleanup">
          <test-suite-call testfile="${open.dir}/luciddb/test/sql/tdone.xml">
            <test-suite-modifier value="company-idx-test"/>
          </test-suite-call>
        </test-suite>
      </cleanup-hook>

    </test-suite>
  </target>
</project>
