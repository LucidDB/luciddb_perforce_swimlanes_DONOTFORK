<project name="bh" default="sqbm-test">
  <target name="sqbm-test">
    <test-suite name="sqbm-test">

      <init-hook>
        <ant target="restoreCatalog"/>
      </init-hook>

      <test name="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/benchins1m_idx.sql"/>
      </test>

      <!--  Official Queries -->
      <test name="sqbm1" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q1.sql"/>
      </test>

      <test name="sqbm2a" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q2a.sql"/>
      </test>

      <test name="sqbm2b" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q2b.sql"/>
      </test>

      <test name="sqbm3a" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q3a.sql"/>
      </test>

      <test name="sqbm3b" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q3b.sql"/>
      </test>

      <test name="sqbm4" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q4.sql"/>
      </test>

      <test name="sqbm5" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q5.sql"/>
      </test>

      <!-- doesn't use bitmap indexes yet -->
      <test name="sqbm6a" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q6a.sql"/>
      </test>

      <!-- doesn't use bitmap indexes yet, very slow -->
      <test name="sqbm6b" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q6b.sql"/>
      </test>

      <test name="sqbm4nob" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <!-- Failing due to LDB-48 -->
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q4nob.sql"/>
      </test>

      <test name="sqbm5nob" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q5nob.sql"/>
      </test>

      <!-- doesn't use bitmap indexes yet, very slow -->
      <test name="sqbm6bnob" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_q6bnob.sql"/>
      </test>

      <!-- stress tests -->
      <test name="sqbmqfh1" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_qfh1.sql"/>
      </test>

      <test name="sqbmqfh2" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_qfh2.sql"/>
      </test>

      <test name="sqbmqfh3" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_qfh3.sql"/>
      </test>

      <test name="sqbmqfh4" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/sqbm_qfh4.sql"/>
      </test>

      <!--  HHJ testing for Aggregates -->
      <test name="hhjswing1" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/hhjswing_q1.sql"/>
      </test>

      <test name="hhjswing2" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/hhjswing_q2.sql"/>
      </test>

      <test name="hhjswing3" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <knownFailure value="true"/>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/hhjswing_q3.sql"/>
      </test>

      <!-- run queries in parallel -->
      <!-- run concurrent users test -->

      <!-- drop table and indexes -->
      <test name="dropidx" requiresSuccess="benchins1mMssql">
        <test-metadata>
          <withIndex value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/sqbm/dropindexes.sql"/>
      </test>

    </test-suite>
  </target>
</project>
