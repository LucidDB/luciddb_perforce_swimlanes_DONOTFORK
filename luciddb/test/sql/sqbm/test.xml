<project name="bh" default="simple-test">
  <target name="simple-test">
    <test-suite testunit="simple-test">

      <init-hook>
        <test name="restoreCatalog" testunit="init-test">
          <ant-task>
            <ant target="restoreCatalog"/>
          </ant-task>
        </test>
      </init-hook>

      <test name="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/benchins1m_idx.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>
      
      <!--  Official Queries -->
      <test name="sqbm1" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q1.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm2a" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q2a.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm2b" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q2b.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm3a" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q3a.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm3b" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q3b.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm4" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q4.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm5" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q5.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm6a" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q6a.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm6b" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q6b.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm4nob" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q4nob.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm5nob" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q5nob.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbm6bnob" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_q6bnob.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <!-- stress tests -->
      <test name="sqbmqfh1" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_qfh1.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbmqfh2" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_qfh2.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbmqfh3" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_qfh3.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="sqbmqfh4" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/sqbm_qfh4.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>
      
      <!--  HHJ testing for Aggregates -->
      <test name="hhjswing1" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/hhjswing_q1.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="hhjswing2" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/hhjswing_q2.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <test name="hhjswing3" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/hhjswing_q3.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

      <!-- run queries in parallel -->
      <!-- run concurrent users test -->

      <!-- drop table and indexes -->
      <test name="dropidx" requiresSuccess="creschema">
        <test-parameter name="sql-file" value="%{open.dir}/luciddb/test/sql/sqbm/gen/${config.prop}/dropindexes.sql"/>
        <javatest testclass="com.lucidera.luciddb.test.bh.SqlTest"/>
      </test>

    </test-suite>
  </target>
</project>
