<project name="bh" default="pge">
  <target name="pge">
    <test-suite name="pge">

      <init-hook>
        <test-suite name="init">
          <test-suite-call testfile="${open.dir}/luciddb/test/sql/tinit.xml">
            <test-suite-modifier value="pge"/>
          </test-suite-call>
        </test-suite>
        <ant dir="${open.dir}/luciddb/test/sql/pge" target="copy-csv"/>
      </init-hook>

      <test name="creschema">
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/create.sql"/>
      </test>

      <test name="index" requiresSuccess="creschema">
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/index.sql"/>
      </test>

      <test name="cubes" requiresSuccess="creschema">
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/cubes.sql"/>
      </test>

      <test name="1" requiresSuccess="creschema">
        <!-- Distinct and In not supported yet -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/1.sql"/>
      </test>

      <test name="2" requiresSuccess="creschema">
        <!-- AVG not supported, changed to MAX -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/2.sql"/>
      </test>

      <test name="3" requiresSuccess="creschema">
        <!-- AVG not supported, changed to COUNT -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/3.sql"/>
      </test>

      <test name="4" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/4.sql"/>
      </test>

      <test name="5" requiresSuccess="creschema">
        <!-- IN not supported yet, changed to massive OR list -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/5.sql"/>
      </test>

      <test name="6" requiresSuccess="creschema">
        <!-- IN not supported yet, changed to massive OR list -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/6.sql"/>
      </test>

      <test name="7" requiresSuccess="creschema">
        <!-- IN not supported yet -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/7.sql"/>
      </test>

      <test name="8" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/8.sql"/>
      </test>

      <test name="9" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/9.sql"/>
      </test>

      <test name="10" requiresSuccess="creschema">
        <!-- AVG and subqueries and DESC -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/10.sql"/>
      </test>

      <test name="11" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/11.sql"/>
      </test>

      <test name="12" requiresSuccess="creschema">
        <!-- Subquery in where clause -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/12.sql"/>
      </test>

      <test name="13" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/13.sql"/>
      </test>

      <test name="14" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/14.sql"/>
      </test>

      <test name="15" requiresSuccess="creschema">
        <!-- IN not supported -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/15.sql"/>
      </test>

      <test name="16" requiresSuccess="creschema">
        <!-- DESC not supported -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/16.sql"/>
      </test>

      <test name="17" requiresSuccess="creschema">
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/17.sql"/>
      </test>

      <test name="18" requiresSuccess="creschema">
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/18.sql"/>
      </test>

      <test name="19" requiresSuccess="creschema">
        <!-- DISTINCT and OUTER JOIN not supported/slow -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/19.sql"/>
      </test>

      <test name="20" requiresSuccess="creschema">
        <!-- OUTER JOIN and DISTINCT not supported/slow -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/20.sql"/>
      </test>

      <test name="20b" requiresSuccess="creschema">
        <!-- OUTER JOIN and DISTINCT not supported/slow-->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/20b.sql"/>
      </test>

      <test name="21" requiresSuccess="creschema">
        <!-- subquery in from clause -->
        <test-metadata>
          <knownFailure value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/21.sql"/>
      </test>
      
      <test name="22" requiresSuccess="creschema">
        <!-- Having not supported yet, and uses rank function -->
        <test-metadata>
          <notImplemented value="true"/>
        </test-metadata>
        <junit-sql file="${open.dir}/luciddb/test/sql/pge/gen/${foreign.db}/22.sql"/>
      </test>

      <cleanup-hook>
        <test-suite name="cleanup">
          <test-suite-call testfile="${open.dir}/luciddb/test/sql/tdone.xml"/>
        </test-suite>
      </cleanup-hook>

    </test-suite>
  </target>
</project>
